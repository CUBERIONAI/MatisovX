    <!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Matisov X | Cyber Samurai</title>
<script src="https://telegram.org/js/telegram-web-app.js"></script>
<script src="https://cdn.tailwindcss.com"></script>
<style>
@import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&display=swap');

body { 
    margin: 0;
    font-family: 'Orbitron', sans-serif; 
    overflow: hidden; 
    user-select: none; 
    background: #050505 url('https://raw.githubusercontent.com/CUBERIONAI/Matisov-X/main/game-background.png') no-repeat center center; 
    background-size: cover;
    color: white;
}

/* –ï—Ñ–µ–∫—Ç –∞—É—Ä–∏ –Ω–∞–≤–∫–æ–ª–æ —Å–∞–º—É—Ä–∞—è —è–∫ –Ω–∞ —Å–∫—Ä—ñ–Ω—à–æ—Ç—ñ */
.samurai-container {
    position: relative;
    width: 320px;
    height: 320px;
    margin: 0 auto;
}

.aura {
    position: absolute;
    top: 50%; left: 50%;
    transform: translate(-50%, -50%);
    width: 280px; height: 280px;
    border-radius: 50%;
    border: 2px solid rgba(0, 210, 255, 0.4);
    box-shadow: 0 0 40px rgba(0, 210, 255, 0.6), inset 0 0 20px rgba(0, 210, 255, 0.3);
    animation: pulse 3s infinite ease-in-out;
}

@keyframes pulse {
    0%, 100% { transform: translate(-50%, -50%) scale(1); opacity: 0.6; }
    50% { transform: translate(-50%, -50%) scale(1.05); opacity: 0.9; }
}

#samurai {
    position: relative;
    z-index: 5;
    max-height: 100%;
    filter: drop-shadow(0 0 20px rgba(0, 210, 255, 0.4));
    transition: transform 0.05s;
}

/* –§—É—Ç—É—Ä–∏—Å—Ç–∏—á–Ω–∏–π –¥–∏–∑–∞–π–Ω –±–∞–ª–∞–Ω—Å—É */
.balance-glow {
    color: #00d2ff;
    text-shadow: 0 0 20px rgba(0, 210, 255, 0.8), 0 0 5px white;
    font-style: italic;
}

/* –ù–æ–≤–∏–π –¥–∏–∑–∞–π–Ω –ø–∞–Ω–µ–ª—ñ –µ–Ω–µ—Ä–≥—ñ—ó (Cyber Frame) */
.cyber-energy-frame {
    position: relative;
    background: rgba(20, 20, 25, 0.8);
    border: 2px solid #1a1a1e;
    padding: 4px;
    border-radius: 4px;
    box-shadow: 0 0 15px rgba(0, 0, 0, 0.5);
}

.cyber-energy-frame::before {
    content: '';
    position: absolute;
    top: -2px; left: 10%; width: 80%; height: 2px;
    background: #00d2ff; box-shadow: 0 0 10px #00d2ff;
}

.energy-fill {
    height: 10px;
    background: linear-gradient(90deg, #00d2ff, #0055ff);
    box-shadow: 0 0 15px #00d2ff;
    transition: width 0.3s cubic-bezier(0.17, 0.67, 0.83, 0.67);
}

.mx-popup {
    position: absolute; color: #00d2ff; font-weight: 900; font-size: 38px;
    pointer-events: none; animation: floatUp 0.6s ease-out forwards;
    text-shadow: 0 0 15px #00d2ff; z-index: 100;
}

@keyframes floatUp { 0% { transform: translateY(0) scale(0.8); opacity: 1; } 100% { transform: translateY(-130px) scale(1.3); opacity: 0; } }

.nav-btn.active { color: #00d2ff; filter: drop-shadow(0 0 8px #00d2ff); }
.screen { display: none; height: calc(100vh - 180px); overflow-y: auto; }
.active-screen { display: block; }
</style>
</head>
<body class="flex flex-col h-screen p-6">

<audio id="sfx-hit" src="https://assets.mixkit.co/active_storage/sfx/2571/2571-preview.mp3"></audio>

<header class="flex justify-between items-start mb-6">
    <div>
        <p class="text-[10px] text-gray-500 uppercase font-bold tracking-tighter">Balance</p>
        <div class="flex items-center gap-2">
            <span id="balance" class="text-4xl font-black balance-glow">0</span>
            <span class="text-blue-500 font-bold text-sm">MX</span>
        </div>
    </div>
    <div class="text-right">
        <p id="rank" class="text-[10px] text-blue-400 font-bold uppercase tracking-widest">Stage 1</p>
        <p class="text-[8px] text-gray-600 italic">1M MX = 1 Coin</p>
    </div>
</header>

<main class="flex-1 flex flex-col justify-around">
    <section id="game-screen" class="screen active-screen">
        <div class="samurai-container" id="tap-target">
            <div class="aura"></div>
            <img id="samurai" src="https://raw.githubusercontent.com/CUBERIONAI/Matisov-X/main/1770305168681.png" alt="Samurai">
        </div>

        <div class="mt-12">
            <div class="flex justify-between text-[9px] mb-2 font-black tracking-[0.2em] text-blue-300">
                <span>‚ö° ENERGY</span>
                <span id="energy-text">1000/1000</span>
            </div>
            <div class="cyber-energy-frame">
                <div id="energy-fill" class="energy-fill" style="width: 100%"></div>
            </div>
        </div>
    </section>

    <section id="tasks-screen" class="screen p-2">
        <h2 class="text-xl font-bold mb-4 text-blue-400 border-b border-blue-900 pb-2">MISSIONS</h2>
        <div id="task-list" class="space-y-3"></div>
    </section>
</main>

<footer class="h-20 bg-[#0a0a0c]/90 border-t border-gray-800 flex justify-around items-center -mx-6 px-6">
    <button onclick="nav('game')" class="nav-btn active flex flex-col items-center">
        <span class="text-2xl">‚öîÔ∏è</span><span class="text-[9px] font-bold mt-1 uppercase">Fight</span>
    </button>
    <button onclick="nav('tasks')" class="nav-btn flex flex-col items-center">
        <span class="text-2xl">üéÅ</span><span class="text-[9px] font-bold mt-1 uppercase">Earn</span>
    </button>
    <button class="nav-btn flex flex-col items-center opacity-30">
        <span class="text-2xl">üë•</span><span class="text-[9px] font-bold mt-1 uppercase">Frens</span>
    </button>
</footer>

<script>
const tg = window.Telegram.WebApp;
tg.expand();

let balance = parseInt(localStorage.getItem('mx_bal')) || 0;
let energy = 1000;
let tapPower = 1;

const samuraiFrames = [
    "https://raw.githubusercontent.com/CUBERIONAI/Matisov-X/main/1770305168681.png",
    "https://raw.githubusercontent.com/CUBERIONAI/Matisov-X/main/1770305191748.png",
    "https://raw.githubusercontent.com/CUBERIONAI/Matisov-X/main/1770305246186.png",
    "https://raw.githubusercontent.com/CUBERIONAI/Matisov-X/main/1770305263574.png"
];
let frameIndex = 0;
const samurai = document.getElementById('samurai');
const tapTarget = document.getElementById('tap-target');
const sfxHit = document.getElementById('sfx-hit');

tapTarget.addEventListener('touchstart', (e) => {
    e.preventDefault();
    if (energy >= tapPower) {
        const touch = e.touches[0];
        balance += tapPower;
        energy -= tapPower;

        frameIndex = (frameIndex + 1) % samuraiFrames.length;
        samurai.src = samuraiFrames[frameIndex];
        samurai.style.transform = "scale(1.08) translateY(-5px)";
        setTimeout(() => samurai.style.transform = "scale(1) translateY(0)", 70);

        sfxHit.currentTime = 0;
        sfxHit.volume = 0.4;
        sfxHit.play();
        showPopup(touch.clientX, touch.clientY);

        if(tg.HapticFeedback) tg.HapticFeedback.impactOccurred('light');
        updateUI();
        save();
    }
});

function showPopup(x, y) {
    const p = document.createElement('div');
    p.className = 'mx-popup';
    p.style.left = (x - 20) + 'px'; p.style.top = (y - 40) + 'px';
    p.innerText = `+${tapPower}`;
    document.body.appendChild(p);
    setTimeout(() => p.remove(), 600);
}

function updateUI() {
    document.getElementById('balance').innerText = balance.toLocaleString();
    document.getElementById('energy-text').innerText = `${energy}/1000`;
    document.getElementById('energy-fill').style.width = (energy/10) + '%';
    const rank = document.getElementById('rank');
    if(balance >= 10000000) rank.innerText = "Stage 3 (Shogun)";
    else if(balance >= 1000000) rank.innerText = "Stage 2 (Samurai)";
}

const missions = [
    { n: "Join Community", r: 1000000, l: "https://t.me/Matisov_X" },
    { n: "Follow Twitter", r: 500000, l: "https://x.com/matisovx" }
];

function initTasks() {
    const list = document.getElementById('task-list');
    list.innerHTML = "";
    missions.forEach(m => {
        list.innerHTML += `
        <div class="bg-[#111]/80 p-4 rounded-xl flex justify-between items-center border-l-4 border-blue-500 shadow-lg">
            <div><p class="text-xs font-bold uppercase">${m.n}</p><p class="text-[10px] text-blue-400">+${m.r.toLocaleString()} MX</p></div>
            <button onclick="doTask('${m.l}', ${m.r})" class="bg-blue-600 px-4 py-2 rounded text-[10px] font-black italic">CLAIM</button>
        </div>`;
    });
}

function doTask(url, reward) {
    window.open(url, '_blank');
    setTimeout(() => {
        balance += reward;
        updateUI();
        save();
        tg.showAlert("Reward Collected!");
    }, 2000);
}

function nav(id) {
    document.querySelectorAll('.screen').forEach(s => s.classList.remove('active-screen'));
    document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
    document.getElementById(id + '-screen').classList.add('active-screen');
    event.currentTarget.classList.add('active');
}

function save() { 
    localStorage.setItem('mx_bal', balance); 
    localStorage.setItem('mx_time', Date.now()); 
}

setInterval(() => { 
    if(energy < 1000) { 
        energy = Math.min(1000, energy + 3); 
        updateUI(); 
    } 
}, 1000);

initTasks();
updateUI();
</script>
</body>
</html>
